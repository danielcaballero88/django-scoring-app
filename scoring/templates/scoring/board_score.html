{% extends "base.html" %}

{% block content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<form action="#" method="post">
  <!-- CSRF toke tag for POST forms targeted at internal urls. -->
  {% csrf_token %}
  <fieldset>
    <legend><h1>{{ game.name }}</h1></legend>
    <!-- Display error message if any. -->
    {% if error_message %}
    <p><strong>{{ error_message }}</strong></p>
    {% endif %}
    <!-- Show list of choices. -->
    <table class="table">
      <thead>
        <tr>
          <th scope="col"></th>
          {% for scorer in scorers %}
            <th scope="col">{{ scorer }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for scoring_category in scoring_categories %}
        <tr>
          <th scope="row">{{ scoring_category.name }}</th>
          {% for scorer in scorers %}
          <th scope="row">
            <input
              type="number"
              name="score-{{ scoring_category.pk }}-{{ scorer.pk }}"
              id="score-{{ scoring_category.pk }}-{{ scorer.pk }}"
            />
          </th>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </fieldset>
  <input type="submit" value="Save" />
</form>

<!-- Button trigger modal -->
<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteBoardModal">
  Delete Board
</button>

<!-- Modal -->
<div class="modal fade" id="deleteBoardModal" tabindex="-1" aria-labelledby="deleteBoardModalLabel" aria-hidden="true">
  <form action="{% url 'scoring:delete_board' board.pk %}" method="post">
    {% csrf_token %}
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteBoardModalLabel">Delete Board {{ board.pk }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Are  you sure you want to delete this board?</p>
          <p>This operation is not reversible!</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button name="delete_board" class="btn btn-danger">Delete</button>
        </div>
      </div>
    </div>
  </form>
</div>

{% endblock %}
